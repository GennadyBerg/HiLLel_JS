<!DOCTYPE html>
<html lang="en">

<head>
            <meta charset="UTF-8">
            <meta http-equiv="X-UA-Compatible" content="IE=edge">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>LocalStorage Example</title>
</head>

<body>

            <script>
                        const storageTitle = 'title';
                        const storageName = 'elements';
                        const tasks = [];
                        let store = null;
                        let titleStor = null;

                        const noteWrap = createEl('div', { id: 'main-wrap', className: "wrapper" });

                        document.body.appendChild(noteWrap);
                        noteWrap.style.backgroundColor = "lightBlue";
                        noteWrap.style.width = "45%";
                        noteWrap.style.height = "50vh";
                        noteWrap.style.textAlign = "center";

                        function createEl(tag, attr) {
                                    const element = document.createElement(tag);
                                    for (const key in attr) {
                                                element[key] = attr[key];
                                    }
                                    return element;
                        }

                        function setItemsSaveLStorage(title) {

                                    const notesTitle = createEl('h2', { id: 'title', textContent: title });
                                    noteWrap.appendChild(notesTitle);

                                    localStorage.setItem("storageTitle", title);
                        }

                        const storedTitle = localStorage.getItem("storageTitle");

                        if (storedTitle) {
                                    setItemsSaveLStorage(storedTitle);
                        } else {
                                    const userInput = prompt("Enter text :");
                                    if (userInput) {
                                                setItemsSaveLStorage(userInput);
                                    }
                        }
                        const button = createEl('button', { textContent: "ADD New Task", id: "add-task" });
                        noteWrap.appendChild(button);

                        const tasksList = createEl('ul');
                        noteWrap.appendChild(tasksList);

                        const addTask = document.getElementById("add-task");
                        addTask.addEventListener('click', (event) => {
                                    const task = prompt('Enter new task');
                                    tasks.push(task);

                                    // Update local storage
                                    localStorage.setItem(storageName, tasks);

                                    // Add task to the DOM
                                    const itemTask = document.createElement("li");
                                    itemTask.innerHTML = task;
                                    const deleteButton = document.createElement("span");
                                    deleteButton.className = "delete-btn";
                                    deleteButton.textContent = "❌";
                                    deleteButton.addEventListener("click", () => {
                                                // Remove task from array
                                                const taskIndex = tasks.indexOf(task);
                                                tasks.splice(taskIndex, 1);

                                                // Update local storage
                                                localStorage.setItem(storageName, tasks);

                                                // Remove task from the DOM
                                                tasksList.removeChild(itemTask);
                                    });

                                    itemTask.appendChild(deleteButton);
                                    tasksList.appendChild(itemTask);
                        });


                        ////////////handle add task////////////////


                        //                         const handleTaskAdd = () => {
                        //             while (true) {
                        //                         const task = prompt("Enter task please");
                        //                         if (!task) break;
                        //                         tasks.push(task);
                        //             }
                        //             tasks.forEach(task => {
                        //                         const itemTask = document.createElement("li");
                        //                         itemTask.innerHTML = task;
                        //                         const deleteButton = document.createElement("span");
                        //                         deleteButton.className = "delete-btn";
                        //                         deleteButton.textContent = "❌";
                        //                         deleteButton.addEventListener("click", (event) => {
                        //                                     ulTasks.removeChild(itemTask);
                        //                         });


                        //                         itemTask.appendChild(deleteButton);
                        //                         ulTasks.append(itemTask);
                        //             })
                        // }

                        // addTask.addEventListener("click", handleTaskAdd);



            </script>

</body>

</html>